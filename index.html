<!DOCTYPE html>
<html>
<head>
<title>Chemistry Game Hub</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{font-family:Arial;background:#0b132b;color:white;margin:0;position:relative}
.card{background:#1c2541;margin:20px;padding:20px;border-radius:15px;text-align:center}
button{padding:12px 20px;font-size:17px;border:none;border-radius:12px;margin:6px;cursor:pointer}
select,input{padding:10px;font-size:18px;border-radius:8px;border:none}
.hidden{display:none}
.correct{background:#06d6a0;color:black;animation:pop .5s}
.wrong{background:#ef476f;color:white;animation:shake .5s}
.mode{background:#3a506b;color:white}
table{margin:auto;color:white;border-collapse:collapse}
#leaderboardTable td,#leaderboardTable th{padding:8px;border:1px solid white}
@keyframes shake{0%,100%{transform:translateX(0)}25%{transform:translateX(-6px)}50%{transform:translateX(6px)}75%{transform:translateX(-6px)}}
@keyframes pop{0%{transform:scale(1)}50%{transform:scale(1.2)}100%{transform:scale(1)}}
.gold{background:#ffd700;color:black}
.silver{background:#c0c0c0;color:black}
.bronze{background:#cd7f32;color:black}
nav{background:#111;color:white;display:flex;align-items:center;padding:10px}
nav h2{margin:0 20px}
nav button{background:#1c2541;color:white}
.dropdown{position:relative}
.dropdown-content{display:none;position:absolute;background:#1c2541;min-width:160px;z-index:1;padding:10px;border-radius:10px;}
.dropdown:hover .dropdown-content{display:block}
.dropdown-content button{display:block;width:100%}
#pointsCounter{position:absolute;top:10px;right:10px;background:#3a506b;padding:10px 15px;border-radius:10px;font-size:18px;}
</style>
</head>
<body>

<nav>
<h2>âš¡ Chem Game Hub</h2>
<div class="dropdown">
<button>ğŸ® Games</button>
<div class="dropdown-content">
<button onclick="chooseGame('Bonding')">ğŸ”— Bonding</button>
<button onclick="chooseGame('Reactions')">ğŸ”¥ Reactions</button>
<button onclick="chooseGame('Atoms')">ğŸ§¬ Atoms & Ions</button>
<button onclick="chooseGame('Balancing')">âš–ï¸ Balancing</button>
</div>
</div>
<button onclick="showLeaderboard()">ğŸ† Leaderboard</button>
<button onclick="adminGate(showDashboard)">ğŸ“Š Teacher Tools</button>
</nav>

<h1 style="text-align:center;margin-top:20px;">Welcome to Chemistry Games!</h1>
<div id="pointsCounter" class="hidden">Points: 0 / 30</div>

<!-- Pages -->
<div id="classPage" class="card hidden">
<h2>Select Your Class</h2>
<button class="mode" onclick="setClass('8A')">8A</button>
<button class="mode" onclick="setClass('8C')">8C</button>
</div>

<div id="modePage" class="card hidden">
<h2>How Are You Playing?</h2>
<button onclick="setPlayMode('Solo')" class="mode">ğŸ¯ Individual</button>
<button onclick="setPlayMode('Battle')" class="mode">âš”ï¸ Group Battle</button>
</div>

<div id="namePage" class="card hidden">
<h2>Enter Your Info</h2>
<p>Name (or initials):</p>
<input id="studentName">
<p>Nickname:</p>
<input id="nickname">
<button onclick="startGame()" class="mode">Start Game</button>
</div>

<div id="gamePage" class="card hidden">
<h2 id="modeTitle"></h2>
<h3 id="question"></h3>
<div id="answers"></div>
</div>

<div id="endPage" class="card hidden">
<h2 id="scoreText"></h2>
<button onclick="window.print()">ğŸ–¨ Print Report</button>
<button onclick="location.reload()">Home</button>
</div>

<div id="leaderboardPage" class="card hidden">
<h2>ğŸ† Leaderboard</h2>
<button onclick="setBoardFilter('ALL')" class="mode">All Classes</button>
<button onclick="setBoardFilter('8A')" class="mode">8A Only</button>
<button onclick="setBoardFilter('8C')" class="mode">8C Only</button>
<table id="leaderboardTable">
<tr><th>Class</th><th>Name</th><th>Nickname</th><th>Mode</th><th>Score</th></tr>
</table>
</div>

<div id="dashboardPage" class="card hidden">
<h2>ğŸ“Š Teacher Dashboard</h2>
<h3 id="avgScore"></h3>
<h3 id="totalGames"></h3>
<div id="missedList"></div>
</div>

<script>
const ADMIN_PASS="science123";
let chosenGame="", chosenClass="", playMode="", student="";
let currentScore=0, currentQ=0, questions=[];

function adminGate(fn){
let p=prompt("Admin Password:");
if(p===ADMIN_PASS) fn();
else alert("Wrong password");
}

function chooseGame(game){chosenGame=game;hideAll();show("classPage");}
function setClass(cls){chosenClass=cls;hideAll();show("modePage");}
function setPlayMode(mode){playMode=mode;hideAll();show("namePage");}
function show(id){document.getElementById(id).classList.remove("hidden");}
function hideAll(){["classPage","modePage","namePage","gamePage","endPage","leaderboardPage","dashboardPage"].forEach(id=>document.getElementById(id).classList.add("hidden"));document.getElementById("pointsCounter").classList.add("hidden");}

function startGame(){
let name=document.getElementById("studentName").value.trim();
let nick=document.getElementById("nickname").value.trim();
if(!name||!nick){alert("Please enter both name and nickname.");return;}
student={name:name,nick:nick};
hideAll();
show("gamePage");
document.getElementById("modeTitle").textContent=`${chosenGame} - ${playMode}`;
currentScore=0;currentQ=0;
document.getElementById("pointsCounter").classList.remove("hidden");
loadQuestions();
showQuestion();
}

const bank={
Bonding:[
{q:"A covalent bond is formed when valence electrons are...",a:["Transferred","Shared","Lost","Made"],c:1},
{q:"An ionic bond is formed when valence electrons are...",a:["Shared","Transferred","Ignored","Split"],c:1},
{q:"Atoms form bonds using the following?",a:["Protons","Electrons","Valence Electrons","Nuclei"],c:2},
{q:"What forms when two nonmetals bond together?",a:["Atomic bonds","Ionic bonds","Covalent bonds","Physical change"],c:2},
{q:"Which type of bond involves sharing electrons?",a:["Ionic","Covalent","Metallic","Hydrogen"],c:1}
]
};

function loadQuestions(){questions=[...bank[chosenGame]];shuffle(questions);}
function shuffle(a){for(let i=a.length-1;i>0;i--){let j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];}}

function showQuestion(){
if(currentQ>=questions.length){endGame();return;}
let q=questions[currentQ];
document.getElementById("question").textContent=q.q;
let ansDiv=document.getElementById("answers");
ansDiv.innerHTML="";
q.a.forEach((opt,i)=>{
let btn=document.createElement("button");
btn.textContent=opt;
btn.onclick=()=>checkAnswer(i,q.c,btn);
ansDiv.appendChild(btn);
});
document.getElementById("pointsCounter").textContent=`Points: ${currentScore} / ${questions.length}`;
}

function checkAnswer(selected, correct, btn){
if(selected===correct){btn.classList.add("correct");currentScore++;}
else btn.classList.add("wrong");
setTimeout(()=>{currentQ++;showQuestion();},500);
}

function endGame(){
hideAll();show("endPage");
document.getElementById("scoreText").textContent=`${student.name} (${student.nick}) scored ${currentScore} / ${questions.length}`;
}

function showLeaderboard(){hideAll();show("leaderboardPage");}
function setBoardFilter(cls){alert("Leaderboard filter feature coming soon.");}
function showDashboard(){hideAll();show("dashboardPage");}
</script>

</body>
</html>
